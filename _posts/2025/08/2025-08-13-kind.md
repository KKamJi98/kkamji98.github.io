---
title: Kindë¡œ Kubernetes Cluster ë°°í¬í•˜ê¸° [Cilium Study 5ì£¼ì°¨]
date: 2025-08-13 02:08:11 +0900
author: kkamji
categories: [Kubernetes, Cilium]
tags: [kubernetes, devops, cilium, cilium-study, cilium-5w, kind, cloudnet, gasida]
comments: true
image:
  path: /assets/img/kubernetes/kubernetes.webp
---

![Kind Architecture](/assets/img/kubernetes/cilium/5w-kind.webp)

KindëŠ” Kubernetes in Dockerì˜ ì¤„ì„ë§ë¡œ, Docker ì»¨í…Œì´ë„ˆë¥¼ ë…¸ë“œë¡œ ì‚¬ìš©í•´ ë¡œì»¬ì—ì„œ Kubernetes Clusterë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ë„êµ¬ì…ë‹ˆë‹¤. Kubernetes Clusterë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆì§€ë§Œ, ë¡œì»¬ ê°œë°œì´ë‚˜ CI ê³¼ì •ì—ì„œë„ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Kindì— ëŒ€í•´ ì•Œì•„ë³´ê³ , Kindë¥¼ ì‚¬ìš©í•´ Clusterë¥¼ ìƒì„±í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

---

## 1. ì‚¬ì „ ì¡°ê±´

- go 1.17+
- [docker](https://www.docker.com/), [podman](https://podman.io/) or [nerdctl](https://github.com/containerd/nerdctl)
- kubectl

---

## 2. Kind ì„¤ì¹˜

```shell
# For AMD64 / x86_64
[ $(uname -m) = x86_64 ] && curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.29.0/kind-linux-amd64
# For ARM64
[ $(uname -m) = aarch64 ] && curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.29.0/kind-linux-arm64
chmod +x ./kind
sudo mv ./kind /usr/local/bin/kind
```

> [Kind Docs - Quick Start](https://kind.sigs.k8s.io/docs/user/quick-start)  

---

## 3. Kindë¡œ Kubernetes Cluster ë°°í¬

Default ì„¸íŒ…ìœ¼ë¡œ Kubernetes Clusterë¥¼ ë°°í¬í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. kindë¡œ ë°°í¬í•œ Clusterì˜ Kubeconfig ContextëŠ” ìë™ìœ¼ë¡œ kind ëª…ë ¹ì„ ë‚ ë¦° í˜¸ìŠ¤íŠ¸ì˜ Kubeconfigì— mergeë©ë‹ˆë‹¤.

```shell
################################
# Cluster ë°°í¬ ì „ ì»¨í…Œì´ë„ˆ í™•ì¸
################################
docker ps
# CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

################################
# Cluster ìƒì„±
################################
kind create cluster
# Creating cluster "kind" ...
#  âœ“ Ensuring node image (kindest/node:v1.33.1) ğŸ–¼ 
#  âœ“ Preparing nodes ğŸ“¦  
#  âœ“ Writing configuration ğŸ“œ 
#  âœ“ Starting control-plane ğŸ•¹ï¸ 
#  âœ“ Installing CNI ğŸ”Œ 
#  âœ“ Installing StorageClass ğŸ’¾ 
# Set kubectl context to "kind-kind"
# You can now use your cluster with:

# kubectl cluster-info --context kind-kind

# Have a question, bug, or feature request? Let us know! https://kind.sigs.k8s.io/#community ğŸ™‚

################################
# Kind Cluster í™•ì¸
################################
kind get clusters  
# kind
```

---

## 4. Kubernetes Cluster ë°°í¬ í™•ì¸

```shell
################################
# kubectl context í™•ì¸
################################
kubectl config get-contexts
CURRENT   NAME        CLUSTER          AUTHINFO           NAMESPACE
*         kind-kind   kind-kind        kind-kind          

################################
# Node ì •ë³´ í™•ì¸
################################
kubectl get node -o wide
# NAME                 STATUS     ROLES           AGE   VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE                         KERNEL-VERSION                     CONTAINER-RUNTIME
# kind-control-plane   NotReady   control-plane   20s   v1.33.1   172.18.0.2    <none>        Debian GNU/Linux 12 (bookworm)   6.6.87.2-microsoft-standard-WSL2   containerd://2.1.1

################################
# Pod ì •ë³´ í™•ì¸
################################
kubectl get pod -A -o wide
# NAMESPACE            NAME                                         READY   STATUS    RESTARTS   AGE   IP           NODE                 NOMINATED NODE   READINESS GATES
# kube-system          coredns-674b8bbfcf-cxjzl                     1/1     Running   0          31s   10.244.0.2   kind-control-plane   <none>           <none>
# kube-system          coredns-674b8bbfcf-gwrcg                     1/1     Running   0          31s   10.244.0.3   kind-control-plane   <none>           <none>
# kube-system          etcd-kind-control-plane                      1/1     Running   0          37s   172.18.0.2   kind-control-plane   <none>           <none>
# kube-system          kindnet-ljlj2                                1/1     Running   0          31s   172.18.0.2   kind-control-plane   <none>           <none>
# kube-system          kube-apiserver-kind-control-plane            1/1     Running   0          37s   172.18.0.2   kind-control-plane   <none>           <none>
# kube-system          kube-controller-manager-kind-control-plane   1/1     Running   0          37s   172.18.0.2   kind-control-plane   <none>           <none>
# kube-system          kube-proxy-pvrxh                             1/1     Running   0          31s   172.18.0.2   kind-control-plane   <none>           <none>
# kube-system          kube-scheduler-kind-control-plane            1/1     Running   0          37s   172.18.0.2   kind-control-plane   <none>           <none>
# local-path-storage   local-path-provisioner-7dc846544d-sp94l      1/1     Running   0          31s   10.244.0.4   kind-control-plane   <none>           <none>

################################
# Component Status í™•ì¸
################################
kubectl get --raw '/healthz?verbose' | sed 's/; /\n/g'

# [+]ping ok
# [+]log ok
# [+]etcd ok
# [+]poststarthook/start-apiserver-admission-initializer ok
# [+]poststarthook/generic-apiserver-start-informers ok
# [+]poststarthook/priority-and-fairness-config-consumer ok
# [+]poststarthook/priority-and-fairness-filter ok
# [+]poststarthook/storage-object-count-tracker-hook ok
# [+]poststarthook/start-apiextensions-informers ok
# [+]poststarthook/start-apiextensions-controllers ok
# [+]poststarthook/crd-informer-synced ok
# [+]poststarthook/start-system-namespaces-controller ok
# [+]poststarthook/start-cluster-authentication-info-controller ok
# [+]poststarthook/start-kube-apiserver-identity-lease-controller ok
# [+]poststarthook/start-kube-apiserver-identity-lease-garbage-collector ok
# [+]poststarthook/start-legacy-token-tracking-controller ok
# [+]poststarthook/start-service-ip-repair-controllers ok
# [+]poststarthook/rbac/bootstrap-roles ok
# [+]poststarthook/scheduling/bootstrap-system-priority-classes ok
# [+]poststarthook/priority-and-fairness-config-producer ok
# [+]poststarthook/bootstrap-controller ok
# [+]poststarthook/start-kubernetes-service-cidr-controller ok
# [+]poststarthook/aggregator-reload-proxy-client-cert ok
# [+]poststarthook/start-kube-aggregator-informers ok
# [+]poststarthook/apiservice-status-local-available-controller ok
# [+]poststarthook/apiservice-status-remote-available-controller ok
# [+]poststarthook/apiservice-registration-controller ok
# [+]poststarthook/apiservice-discovery-controller ok
# [+]poststarthook/kube-apiserver-autoregistration ok
# [+]autoregister-completion ok
# [+]poststarthook/apiservice-openapi-controller ok
# [+]poststarthook/apiservice-openapiv3-controller ok
# healthz check passed

################################
# Docker Container í™•ì¸
################################
docker ps
# CONTAINER ID   IMAGE                  COMMAND                  CREATED         STATUS         PORTS                       NAMES
# 72fe47021619   kindest/node:v1.33.1   "/usr/local/bin/entrâ€¦"   3 minutes ago   Up 3 minutes   127.0.0.1:39917->6443/tcp   kind-control-plane

################################
# Docker Network í™•ì¸
################################
docker inspect kind | jq '.[0].IPAM.Config'
[
  {
    "Subnet": "172.18.0.0/16",
    "Gateway": "172.18.0.1"
  },
  {
    "Subnet": "fc00:f853:ccd:e793::/64",
    "Gateway": "fc00:f853:ccd:e793::1"
  }
]

################################
# Control Plane Containerì—ì„œ í¬íŠ¸ ë°”ì¸ë”© í™•ì¸
################################
docker exec -it kind-control-plane ss -tnlp | grep 6443
LISTEN 0      4096               *:6443             *:*    users:(("kube-apiserver",pid=554,fd=3)) 
```

---

## 5. Pod ìƒì„± ë° í†µì‹  í™•ì¸

Kindì˜ Default Settingìœ¼ë¡œ Control Plane Node ë§Œ ì¡´ì¬í•  ê²½ìš°, Control Plane Nodeì— Podê°€ ìŠ¤ì¼€ì¤„ë  ìˆ˜ ìˆë„ë¡ `NoSchedule` **taint**ê°€ ì œê±°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

```shell
################################
# Node Taint í™•ì¸
################################
kubectl describe node | grep -i Taints
# Taints:             <none>

################################
# Sample Application ë°°í¬ (webpod Deployment + Service)
################################
cat << EOF | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: webpod
spec:
  replicas: 1
  selector:
    matchLabels:
      app: webpod
  template:
    metadata:
      labels:
        app: webpod
    spec:
      affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
          - labelSelector:
              matchExpressions:
              - key: app
                operator: In
                values: ["webpod"]
            topologyKey: "kubernetes.io/hostname"
      containers:
      - name: webpod
        image: traefik/whoami
        ports:
        - containerPort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: webpod
  labels:
    app: webpod
spec:
  selector:
    app: webpod
  ports:
  - protocol: TCP
    port: 80
    targetPort: 80
  type: ClusterIP
EOF

###############################################
# curl-pod ë°°í¬ (k8s-ctrì— ê³ ì •)
###############################################
cat <<EOF | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: curl-pod
  labels:
    app: curl
spec:
  containers:
  - name: curl
    image: nicolaka/netshoot
    command: ["tail"]
    args: ["-f", "/dev/null"]
  terminationGracePeriodSeconds: 0
EOF

###############################################
# Pod Status í™•ì¸
###############################################
kubectl get deploy,po,svc -o wide
# NAME                     READY   UP-TO-DATE   AVAILABLE   AGE     CONTAINERS   IMAGES           SELECTOR
# deployment.apps/webpod   1/1     1            1           2m43s   webpod       traefik/whoami   app=webpod

# NAME                          READY   STATUS    RESTARTS   AGE     IP           NODE                 NOMINATED NODE   READINESS GATES
# pod/curl-pod                  1/1     Running   0          2m43s   10.244.0.7   kind-control-plane   <none>           <none>
# pod/webpod-74f6f7bd86-s72mc   1/1     Running   0          2m43s   10.244.0.6   kind-control-plane   <none>           <none>

# NAME                 TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)   AGE     SELECTOR
# service/kubernetes   ClusterIP   10.96.0.1      <none>        443/TCP   15m     <none>
# service/webpod       ClusterIP   10.96.187.29   <none>        80/TCP    2m43s   app=webpod

###############################################
# í†µì‹  í™•ì¸
###############################################
kubectl exec -it curl-pod -- curl -s http://webpod.default.svc.cluster.local

# Hostname: webpod-74f6f7bd86-s72mc
# IP: 127.0.0.1
# IP: ::1
# IP: 10.244.0.6
# IP: fe80::9004:12ff:fee7:117e
# RemoteAddr: 10.244.0.7:47124
# GET / HTTP/1.1
# Host: webpod.default.svc.cluster.local
# User-Agent: curl/8.14.1
# Accept: */*
```

---

## 6. Cluster ì‚­ì œ ë° Context í™•ì¸

```shell
################################
# í´ëŸ¬ìŠ¤í„° í™•ì¸
################################
kind get clusters 
# kind

################################
# í´ëŸ¬ìŠ¤í„° ì‚­ì œ
################################
# Default Clusterì˜ ê²½ìš° ì´ë¦„ì„ ë”°ë¡œ ì§€ì •í•´ì£¼ì§€ ì•Šì•„ë„ ë¨
kind delete cluster --name kind
# Deleting cluster "kind" ...
# Deleted nodes: ["kind-control-plane"]

################################
# Docker Container í™•ì¸
################################
docker ps                                                       
# CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

################################
# Kind Clusterì˜ Context í™•ì¸ (ì‚­ì œë¨)
################################
kubectl config get-contexts                                                 
# CURRENT   NAME     CLUSTER          AUTHINFO           NAMESPACE

```

---

## 7. Reference

- [Kind Docs](https://kind.sigs.k8s.io/)
- [Kind Docs - Quick Start](https://kind.sigs.k8s.io/docs/user/quick-start)

---

> **ê¶ê¸ˆí•˜ì‹  ì ì´ë‚˜ ì¶”ê°€í•´ì•¼ í•  ë¶€ë¶„ì€ ëŒ“ê¸€ì´ë‚˜ ì•„ë˜ì˜ ë§í¬ë¥¼ í†µí•´ ë¬¸ì˜í•´ì£¼ì„¸ìš”.**  
> **Written with [KKamJi](https://www.linkedin.com/in/taejikim/)**  
{: .prompt-info}
